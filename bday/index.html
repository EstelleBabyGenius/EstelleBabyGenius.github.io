<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="style.css" type="text/css">
	<title>birthday calc</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript">
		var monthTable = [1, 4, 4, 0, 2, 5, 0, 3, 6, 1, 4, 6]; // January, ... , December
		var dayTable = ["saturday", "sunday", "monday", "tuesday", "wednesday", "thursday", "friday"]; // Monday, ... , Sunday
		var selectedDay = null;

		window.onkeyup = function(e) {
			var key = e.keyCode ? e.keyCode : e.which;
			var input = $("#birthdayInput");
			if (input.val().length != 8) {
				$("#" + selectedDay).css({"transform" : "scale(1)"});
			}
			else {
				$("#" + selectedDay).css({"transform" : "scale(1)"});
				computeWeekday(input.val());
			}
			
		}

		function parseDate(birthDate) {
			if (birthDate.length != 8) return -1;
			var decade = parseInt(birthDate[0] + birthDate[1]);
			var year = parseInt(birthDate[2] + birthDate[3]);
			var month = parseInt(birthDate[4] + birthDate[5]);
			if (month < 1 || month > 12) return -1;
			var day = parseInt(birthDate[6] + birthDate[7]);
			if (day < 1 || day > 31) return -1;

			return [decade, year, month, day];
		}

		function computeWeekday(birthDate) {
			var parsedDate = parseDate(birthDate);
			if (parsedDate == -1) {
				return -1;
			}

			var decade = parseInt(birthDate[0] + birthDate[1]);
			var year = parseInt(birthDate[2] + birthDate[3]);
			var month = parseInt(birthDate[4] + birthDate[5]);
			month = monthTable[month];
			var day = parseInt(birthDate[6] + birthDate[7]);

			if (decade < 17) decade = 4;
			else if (decade < 18) decade = 2;
			else if (decade < 20) decade = 0;
			else if (decade >= 20) decade = 6;
			else if (decade >= 21) decade = 4;

			var sum = year + month + day + decade;

			var weekday = dayTable[sum % 7];
			selectedDay = weekday;

			$("#" + weekday).css({"transform" : "scale(1.5)"});
		}

	</script>
</head>
<body>

<div id="mainContent">
	<p>enter birth date yyyymmdd</p>
	<input id="birthdayInput" type="text" maxlength="8" autofocus>
	<p id="hitEnter">hit enter</p>

	<p id="youWereBorn">you were born on a</p>
	<div class="centeredFlex">
		<p id="monday" class="weekday">monday</p>
		<p id="tuesday" class="weekday">tuesday</p>
		<p id="wednesday" class="weekday">wednesday</p>
		<p id="thursday" class="weekday">thursday</p>
		<p id="friday" class="weekday">friday</p>
		<p id="saturday" class="weekday">saturday</p>
		<p id="sunday" class="weekday">sunday</p>
	</div>
</div>

</body>
</html>